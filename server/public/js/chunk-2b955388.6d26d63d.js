(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b955388"],{"371c":function(e,t,n){},"3c43":function(e,t){t.endianness=function(){return"LE"},t.hostname=function(){return"undefined"!==typeof location?location.hostname:""},t.loadavg=function(){return[]},t.uptime=function(){return 0},t.freemem=function(){return Number.MAX_VALUE},t.totalmem=function(){return Number.MAX_VALUE},t.cpus=function(){return[]},t.type=function(){return"Browser"},t.release=function(){return"undefined"!==typeof navigator?navigator.appVersion:""},t.networkInterfaces=t.getNetworkInterfaces=function(){return{}},t.arch=function(){return"javascript"},t.platform=function(){return"browser"},t.tmpdir=t.tmpDir=function(){return"/tmp"},t.EOL="\n",t.homedir=function(){return"/"}},"548b":function(e,t,n){"use strict";var o=n("371c"),r=n.n(o);r.a},"7c7a":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"roleManage"},[n("div",{staticClass:"top_operate"},[n("Input",{staticStyle:{width:"300px","margin-right":"30px"},attrs:{search:"","enter-button":"查询",size:"large",placeholder:"角色查询"},on:{"on-search":e.search,"on-enter":e.search},model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:"searchKey"}}),n("Button",{attrs:{size:"large",icon:"ios-add",type:"primary"},on:{click:function(t){e.addRoleStatus=!0}}},[e._v("新增角色")])],1),n("Table",{directives:[{name:"show",rawName:"v-show",value:e.dataRole.length,expression:"dataRole.length"}],attrs:{border:"",stripe:"",size:"large",loading:e.isLoading,columns:e.columnsRole,data:e.dataRole}}),n("Page",{staticStyle:{"margin-top":"20px"},attrs:{total:e.totalCount,cureent:e.currentPage,"show-total":"","page-size":e.pageSize,"show-elevator":""},on:{"on-change":e.goPage}}),n("Modal",{attrs:{title:"新增角色"},on:{"on-ok":e.addRole,"on-cancel":function(t){e.addRoleStatus=!1}},model:{value:e.addRoleStatus,callback:function(t){e.addRoleStatus=t},expression:"addRoleStatus"}},[n("div",{staticClass:"center_g marginTop10"},[n("p",{staticClass:"label_g"},[e._v("角色名称")]),n("Input",{attrs:{placeholder:"请输入角色名..."},model:{value:e.roleAdd.roleName,callback:function(t){e.$set(e.roleAdd,"roleName",t)},expression:"roleAdd.roleName"}})],1),n("div",{staticClass:"center_g marginTop10"},[n("p",{staticClass:"label_g"},[e._v("角色说明")]),n("Input",{attrs:{placeholder:"请输入角色说明..."},model:{value:e.roleAdd.roleDirection,callback:function(t){e.$set(e.roleAdd,"roleDirection",t)},expression:"roleAdd.roleDirection"}})],1)]),n("Modal",{attrs:{title:"编辑角色"},on:{"on-ok":e.editRole,"on-cancel":function(t){e.editRoleStatus=!1}},model:{value:e.editRoleStatus,callback:function(t){e.editRoleStatus=t},expression:"editRoleStatus"}},[n("div",{staticClass:"center_g marginTop10"},[n("p",{staticClass:"label_g"},[e._v("角色名称")]),n("Input",{attrs:{placeholder:"请输入角色名..."},model:{value:e.roleEdit.roleName,callback:function(t){e.$set(e.roleEdit,"roleName",t)},expression:"roleEdit.roleName"}})],1),n("div",{staticClass:"center_g marginTop10"},[n("p",{staticClass:"label_g"},[e._v("角色说明")]),n("Input",{attrs:{placeholder:"请输入角色说明..."},model:{value:e.roleEdit.roleDirection,callback:function(t){e.$set(e.roleEdit,"roleDirection",t)},expression:"roleEdit.roleDirection"}})],1)]),n("Modal",{attrs:{title:"菜单权限分配"},on:{"on-ok":e.menuAuthHandler,"on-cancel":function(t){e.menuAuthStatus=!1}},model:{value:e.menuAuthStatus,callback:function(t){e.menuAuthStatus=t},expression:"menuAuthStatus"}},[n("Tree",{ref:"MenuTree",attrs:{data:e.treeData,"show-checkbox":"","check-strictly":e.checkStrictly,multiple:""},on:{"on-check-change":e.checkedChange}})],1)],1)},r=[],i=n("768b"),a=(n("ac6a"),n("5d73")),l=n.n(a),c=(n("7f7f"),n("880a")),s=(n("3c43"),{data:function(){var e=this;return{pageSize:15,totalCount:0,currentPage:1,menuAuthStatus:!1,searchKey:"",isLoading:!1,addRoleStatus:!1,editRoleStatus:!1,checkStrictly:!1,roleAdd:{roleName:"",roleDirection:""},roleEdit:{roleName:"",roleDirection:"",id:"",index:""},updateAuthMenuStr:"",currentRoleId:"",treeData:[],columnsRole:[{title:"序号",width:80,type:"index",render:function(e,t){return e("div",[e("Icon",{props:{type:"person"}}),e("strong",t.row.name)])}},{title:"角色名称",key:"RoleName"},{title:"角色说明",key:"Directions"},{title:"操作",key:"action",align:"center",render:function(t,n){return t("div",[t("Button",{props:{type:"primary"},style:{margin:"8px"},on:{click:function(){e.edit(n)}}},"编辑"),t("Button",{props:{type:"primary"},style:{margin:"8px"},on:{click:function(){e.menuAuthAssign(n)}}},"菜单权限分配"),t("Button",{props:{type:"primary"},style:{margin:"8px"},on:{click:function(){e.moduleAuthAssign(n)}}},"模块权限分配"),t("Button",{props:{type:"error"},style:{margin:"8px"},on:{click:function(){e.remove(n)}}},"删除")])}}],dataRole:[]}},activated:function(){this.getRoleList()},methods:{queryAuthMenu:function(e){var t=this;Object(c["v"])({roleId:e}).then(function(e){t.treeData=e.data.menuList})},search:function(){this.getRoleList()},addRole:function(){var e=this;Object(c["c"])({roleName:this.roleAdd.roleName,direction:this.roleAdd.roleDirection}).then(function(t){e.roleAdd={roleName:"",roleDirection:""},e.getRoleList()})},editRole:function(){var e=this;Object(c["p"])({roleName:this.roleEdit.roleName,direction:this.roleEdit.roleDirection,id:this.roleEdit.id}).then(function(t){e.$set(e.dataRole[e.roleEdit.index],"RoleName",e.roleEdit.roleName),e.$set(e.dataRole[e.roleEdit.index],"Directions",e.roleEdit.roleDirection)})},getRoleList:function(e){var t=this;this.isLoading=!0,Object(c["A"])({key:this.searchKey,currentPage:this.currentPage,pageSize:this.pageSize}).then(function(e){t.isLoading=!1,t.dataRole=e.data.roleList,t.totalCount=e.data.total},function(e){t.isLoading=!1})},edit:function(e){this.editRoleStatus=!0,this.roleEdit={roleName:e.row.RoleName,roleDirection:e.row.Directions,id:e.row.RoleId,index:e.index}},remove:function(e){var t=this;console.log(e),this.$Modal.confirm({title:"提示",content:"<p>确定要要删除该角色?</p>",onOk:function(){Object(c["k"])({id:e.row.RoleId}).then(function(n){t.dataRole.splice(e.index,1)})}})},moduleAuthAssign:function(e){},menuAuthAssign:function(e){var t=e.row.RoleId;this.menuAuthStatus=!0,this.checkStrictly=!0,this.currentRoleId=t,this.queryAuthMenu(t)},checkedChange:function(){this.checkStrictly=!1;var e=this.$refs.MenuTree.getCheckedAndIndeterminateNodes(),t=e.length-1,n="",o=!0,r=!1,a=void 0;try{for(var c,s=l()(e.entries());!(o=(c=s.next()).done);o=!0){var u=Object(i["a"])(c.value,2),d=u[0],h=u[1];n+="(".concat(this.currentRoleId,",").concat(h.id,")").concat(d===t?"":",")}}catch(p){r=!0,a=p}finally{try{o||null==s.return||s.return()}finally{if(r)throw a}}this.updateAuthMenuStr=n,console.log(n)},menuAuthHandler:function(){var e=this;Object(c["B"])({str:this.updateAuthMenuStr,roleId:this.currentRoleId}).then(function(t){e.$root.eventBus.$emit("getMenu")})},goPage:function(e){this.currentPage=e,this.getRoleList()}}}),u=s,d=(n("548b"),n("2877")),h=Object(d["a"])(u,o,r,!1,null,"5f89fe2b",null);t["default"]=h.exports}}]);