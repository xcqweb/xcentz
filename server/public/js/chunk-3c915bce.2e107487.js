(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3c915bce"],{"01ca":function(e,t,a){},"193c":function(e,t,a){"use strict";var r=a("01ca");a.n(r).a},5722:function(e,t,a){"use strict";a.r(t),a("a481");var r=a("f499"),s=a.n(r),i=(a("7f7f"),a("cebc")),d=a("15b8"),l=a.n(d),n=a("5829"),o=a("880a"),c={data:function(){var e=this;return{loading:!1,isSend:!1,isSendText:"获取邮箱验证码",addUser:{user:"",old_password:"",password:"",confirmPsw:"",phone:"",role:21,cname:"",email:"",code:""},ruleInline:l()({user:[{required:!0,trigger:"blur"}],old_password:[{required:!0,message:"请输入原密码",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],confirmPsw:[{required:!0,validator:function(t,a,r){""===a?r(new Error("请再次输入密码!")):(a.length<6&&r(new Error("密码长度不少于6位数!")),a!==e.addUser.password&&r(new Error("两次输入密码不一致!")),r())},trigger:"blur"}],canme:[{required:!0,message:"请输中文名",trigger:"blur"}],code:[{required:!0,message:"请选输入验证码",trigger:"blur"}]})}},activated:function(){this.queryUser()},methods:{queryUser:function(){var e,t=this;(e={userId:this.userInfo.UserId},Object(n.a)({url:"/userCenter/queryUser",method:"get",params:e})).then(function(e){t.addUser=Object(i.a)({},t.addUser,e.data.userInfo)})},getCode:function(){var e=this;this.loading=!0,Object(o.s)({email:this.addUser.email,type:"edit"}).then(function(t){e.loading=!1,e.isSend=!0;var a=60,r=setInterval(function(){e.isSendText="".concat(a--,"s后重新获取"),a<0&&(clearInterval(r),e.isSendText="获取邮箱验证码",e.isSend=!1)},1e3)},function(t){e.$Message.error({content:"验证码获取失败,请重新获取！",top:50,duration:5}),e.isSendText="重新获取邮箱验证码",e.loading=!1,e.isSend=!1})},handlerSubmit:function(e){var t=this;this.$refs[e].validate(function(e){var a;e&&(a={user:s()(t.addUser),userId:t.userInfo.UserId},Object(n.a)({url:"/userCenter/editPassword",method:"put",data:a})).then(function(e){var a=setTimeout(function(){clearTimeout(a),localStorage.clear(),t.$router.replace("/login")},3e3)})})},editUser:function(){(function(e){return Object(n.a)({url:"/userCenter/edituserInfo",method:"put",data:e})})({phone:this.addUser.phone,cname:this.addUser.cname,userId:this.userInfo.UserId}).then(function(e){})},updateAvatar:function(){alert("正在加紧开发中...`")}}},p=(a("193c"),a("2877")),u=Object(p.a)(c,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("i-tabs",[a("i-tab-pane",{staticStyle:{display:"flex",margin:"30px 0 0 0",cursor:"pointer"},attrs:{label:"个人信息",icon:"ios-contact"}},[a("i-avatar",{staticStyle:{width:"260px",height:"300px",margin:"0 36px"},attrs:{src:"https://i.loli.net/2017/08/21/599a521472424.jpg"},nativeOn:{click:function(t){return e.updateAvatar(t)}}}),a("i-form",{ref:"form_adduser",staticStyle:{width:"360px"},attrs:{model:e.addUser,"label-width":80,rules:e.ruleInline}},[a("i-form-item",{staticStyle:{height:"40px"},attrs:{prop:"user",label:"用户名"}},[a("i-input",{staticStyle:{width:"100%"},attrs:{type:"text",size:"large",disabled:""},model:{value:e.addUser.user,callback:function(t){e.$set(e.addUser,"user",t)},expression:"addUser.user"}})],1),a("i-form-item",{staticStyle:{margin:"26px 0"},attrs:{prop:"phone",label:"电话"}},[a("i-input",{staticStyle:{width:"100%"},attrs:{type:"text",size:"large"},on:{"on-blur":e.editUser},model:{value:e.addUser.phone,callback:function(t){e.$set(e.addUser,"phone",t)},expression:"addUser.phone"}})],1),a("i-form-item",{staticStyle:{margin:"26px 0"},attrs:{prop:"role",label:"角色"}},[a("i-input",{staticStyle:{width:"100%"},attrs:{type:"text",size:"large",disabled:""},model:{value:e.addUser.role,callback:function(t){e.$set(e.addUser,"role",t)},expression:"addUser.role"}})],1),a("i-form-item",{staticStyle:{margin:"26px 0"},attrs:{prop:"cname",label:"中文名"}},[a("i-input",{staticStyle:{width:"100%"},attrs:{type:"text",size:"large"},on:{"on-blur":e.editUser},model:{value:e.addUser.cname,callback:function(t){e.$set(e.addUser,"cname",t)},expression:"addUser.cname"}})],1),a("i-form-item",{staticStyle:{margin:"26px 0"},attrs:{prop:"email",label:"邮箱"}},[a("i-input",{staticStyle:{width:"100%"},attrs:{type:"text",size:"large",disabled:"",placeholder:"请输入邮箱"},model:{value:e.addUser.email,callback:function(t){e.$set(e.addUser,"email",t)},expression:"addUser.email"}})],1)],1)],1),a("i-tab-pane",{attrs:{label:"修改密码",icon:"md-create"}},[a("i-form",{ref:"form_adduser",staticStyle:{width:"360px"},attrs:{model:e.addUser,"label-width":80,rules:e.ruleInline}},[a("i-form-item",{staticStyle:{margin:"26px 0"},attrs:{prop:"old_password",label:"原密码"}},[a("i-input",{staticStyle:{width:"100%"},attrs:{type:"password",size:"large",placeholder:"请输入原密码"},model:{value:e.addUser.old_password,callback:function(t){e.$set(e.addUser,"old_password",t)},expression:"addUser.old_password"}})],1),a("i-form-item",{staticStyle:{margin:"26px 0"},attrs:{prop:"password",label:"新密码"}},[a("i-input",{staticStyle:{width:"100%"},attrs:{type:"password",size:"large",placeholder:"请输入密码"},model:{value:e.addUser.password,callback:function(t){e.$set(e.addUser,"password",t)},expression:"addUser.password"}})],1),a("i-form-item",{staticStyle:{margin:"26px 0"},attrs:{prop:"confirmPsw",label:"确认密码"}},[a("i-input",{staticStyle:{width:"100%"},attrs:{type:"password",size:"large",placeholder:"请再次输入密码"},model:{value:e.addUser.confirmPsw,callback:function(t){e.$set(e.addUser,"confirmPsw",t)},expression:"addUser.confirmPsw"}})],1),a("i-form-item",{staticStyle:{margin:"26px 0"},attrs:{prop:"email",label:"邮箱"}},[a("i-input",{staticStyle:{width:"100%"},attrs:{type:"text",size:"large",disabled:"",placeholder:"请输入邮箱"},model:{value:e.addUser.email,callback:function(t){e.$set(e.addUser,"email",t)},expression:"addUser.email"}})],1),a("i-form-item",{staticStyle:{margin:"26px 0"},attrs:{prop:"code",label:"验证码"}},[a("i-input",{staticStyle:{width:"100%"},attrs:{type:"text",size:"large",placeholder:"请输入邮箱验证码"},model:{value:e.addUser.code,callback:function(t){e.$set(e.addUser,"code",t)},expression:"addUser.code"}},[a("i-button",{style:{backgroundColor:e.isSend?"#f7f7f7":"#2d8cf0",color:e.isSend?"#c5c8ce":"#fff"},attrs:{slot:"append",disabled:!!e.isSend,loading:e.loading},on:{click:e.getCode},slot:"append"},[e._v(e._s(e.isSendText))])],1)],1)],1),a("i-button",{staticStyle:{float:"left","margin-left":"30px",width:"330px"},attrs:{type:"primary",disabled:!(e.addUser.old_password&&e.addUser.password&&e.addUser.confirmPsw&&e.addUser.code)},on:{click:function(t){return e.handlerSubmit("form_adduser")}}},[e._v("确认")])],1),a("i-tab-pane",{attrs:{label:"用户设置",icon:"logo-tux"}},[a("ul",{staticStyle:{"margin-top":"20px"}},e._l(10,function(t){return a("li",{staticStyle:{display:"flex","align-items":"center",width:"100%",padding:"20px 0","border-bottom":"1px solid rgb(245, 238, 238)"}},[a("span",{staticStyle:{flex:"1","text-align":"left","font-size":"16px"}},[e._v("消息接收设置")]),a("i-switch",{attrs:{size:"large"}})],1)}),0)]),a("i-tab-pane",{attrs:{label:"系统消息",icon:"md-alarm"}},[e._v("系统消息")])],1)},[],!1,null,"5edd5f68",null);t.default=u.exports}}]);