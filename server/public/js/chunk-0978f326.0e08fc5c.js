(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0978f326"],{"009f":function(e,t,n){},"71a8":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"con"},[n("i-form",{ref:"formInline",staticStyle:{width:"360px"},attrs:{model:e.formInline,rules:e.ruleInline}},[n("FormItem",{staticStyle:{height:"40px"},attrs:{prop:"user"}},[n("Input",{staticStyle:{width:"100%"},attrs:{type:"text",size:"large",placeholder:"用户名或邮箱"},model:{value:e.formInline.user,callback:function(t){e.$set(e.formInline,"user",t)},expression:"formInline.user"}},[n("Icon",{attrs:{slot:"prepend",type:"ios-person-outline"},slot:"prepend"})],1)],1),n("FormItem",{staticStyle:{margin:"30px 0 30px 0"},attrs:{prop:"password"}},[n("Input",{staticStyle:{width:"100%"},attrs:{type:e.showPsw?"password":"text",size:"large",placeholder:"密码"},model:{value:e.formInline.password,callback:function(t){e.$set(e.formInline,"password",t)},expression:"formInline.password"}},[n("Icon",{attrs:{slot:"prepend",type:"ios-lock-outline"},slot:"prepend"}),n("Icon",{directives:[{name:"show",rawName:"v-show",value:e.showPsw,expression:"showPsw"}],staticStyle:{cursor:"pointer"},attrs:{slot:"append",type:"md-eye"},on:{click:function(t){e.showPsw=!1}},slot:"append"}),n("Icon",{directives:[{name:"show",rawName:"v-show",value:!e.showPsw,expression:"!showPsw"}],staticStyle:{cursor:"pointer"},attrs:{slot:"append",type:"md-eye-off"},on:{click:function(t){e.showPsw=!0}},slot:"append"})],1)],1),n("FormItem",{staticStyle:{margin:"30px 0 30px 0"},attrs:{prop:"code"}},[n("Input",{staticStyle:{width:"100%"},attrs:{type:"text",size:"large",placeholder:"验证码"},model:{value:e.formInline.code,callback:function(t){e.$set(e.formInline,"code",t)},expression:"formInline.code"}},[n("img",{staticStyle:{cursor:"pointer"},attrs:{slot:"append",src:e.verifyImg,width:"80",height:"20"},on:{click:e.getCode},slot:"append"})])],1),n("FormItem",[n("Button",{staticStyle:{width:"360px"},attrs:{type:"primary",size:"large",disabled:!(e.formInline.user&&e.formInline.password&&e.formInline.code&&e.validCode),loading:e.loading},on:{click:function(t){return e.handleSubmit("formInline")}}},[e._v("登录")])],1)],1)],1)},r=[],s=(n("a481"),n("f499")),i=n.n(s),a=(n("7f7f"),n("880a")),l={name:"login",data:function(){var e=this,t=function(t,n,o){""===n?o(new Error("请输入验证码!")):Object(a["g"])({code:n}).then(function(t){t.data.valid?(e.validCode=!0,o()):(e.validCode=!1,o(new Error("验证码不正确!")))})};return{validCode:!1,showPsw:!0,verifyImg:"",loading:!1,formInline:{user:"chase.xu",password:"88888888",code:""},ruleInline:{user:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{type:"string",min:6,message:"密码长度不少于6位数",trigger:"blur"}],code:[{validator:t,trigger:"blur"}]}}},deactivated:function(){removeEventListener("keyup",this.keyupLogin,!1)},activated:function(){this.getCode(),addEventListener("keyup",this.keyupLogin,!1)},methods:{keyupLogin:function(e){13==e.keyCode&&this.handleSubmit("formInline")},getCode:function(){var e=this;Object(a["q"])().then(function(t){var n=t.data,o=new FileReader;o.readAsDataURL(n),o.onload=function(t){e.verifyImg=t.target.result}})},handleSubmit:function(e){var t=this;this.$refs[e].validate(function(e){e&&(t.loading=!0,Object(a["t"])({username:t.formInline.user,password:t.formInline.password,code:t.formInline.code}).then(function(e){200===e.status&&(t.loading=!1,t.userInfo=e.data.user,localStorage.setItem("token",e.data.token),localStorage.setItem("userInfo",i()(e.data.user)),t.$router.replace("/demo"))},function(e){t.loading=!1}))})}}},d=l,c=(n("dbef"),n("2877")),u=Object(c["a"])(d,o,r,!1,null,"a899c992",null);t["default"]=u.exports},dbef:function(e,t,n){"use strict";var o=n("009f"),r=n.n(o);r.a}}]);