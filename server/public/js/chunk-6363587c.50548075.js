(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6363587c"],{5722:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Tabs",[r("TabPane",{staticStyle:{display:"flex",margin:"30px 0 0 0",cursor:"pointer"},attrs:{label:"个人信息",icon:"ios-contact"}},[r("Avatar",{staticStyle:{width:"260px",height:"300px",margin:"0 36px"},attrs:{src:"https://i.loli.net/2017/08/21/599a521472424.jpg"},nativeOn:{click:function(t){return e.updateAvatar(t)}}}),r("i-form",{ref:"form_adduser",staticStyle:{width:"360px"},attrs:{model:e.addUser,"label-width":80,rules:e.ruleInline}},[r("FormItem",{staticStyle:{height:"40px"},attrs:{prop:"user",label:"用户名"}},[r("Input",{staticStyle:{width:"100%"},attrs:{type:"text",size:"large",disabled:""},model:{value:e.addUser.user,callback:function(t){e.$set(e.addUser,"user",t)},expression:"addUser.user"}})],1),r("FormItem",{staticStyle:{margin:"26px 0"},attrs:{prop:"phone",label:"电话"}},[r("Input",{staticStyle:{width:"100%"},attrs:{type:"text",size:"large"},on:{"on-blur":e.editUser},model:{value:e.addUser.phone,callback:function(t){e.$set(e.addUser,"phone",t)},expression:"addUser.phone"}})],1),r("FormItem",{staticStyle:{margin:"26px 0"},attrs:{prop:"role",label:"角色"}},[r("Input",{staticStyle:{width:"100%"},attrs:{type:"text",size:"large",disabled:""},model:{value:e.addUser.role,callback:function(t){e.$set(e.addUser,"role",t)},expression:"addUser.role"}})],1),r("FormItem",{staticStyle:{margin:"26px 0"},attrs:{prop:"cname",label:"中文名"}},[r("Input",{staticStyle:{width:"100%"},attrs:{type:"text",size:"large"},on:{"on-blur":e.editUser},model:{value:e.addUser.cname,callback:function(t){e.$set(e.addUser,"cname",t)},expression:"addUser.cname"}})],1),r("FormItem",{staticStyle:{margin:"26px 0"},attrs:{prop:"email",label:"邮箱"}},[r("Input",{staticStyle:{width:"100%"},attrs:{type:"text",size:"large",disabled:"",placeholder:"请输入邮箱"},model:{value:e.addUser.email,callback:function(t){e.$set(e.addUser,"email",t)},expression:"addUser.email"}})],1)],1)],1),r("TabPane",{attrs:{label:"修改密码",icon:"md-create"}},[r("i-form",{ref:"form_adduser",staticStyle:{width:"360px"},attrs:{model:e.addUser,"label-width":80,rules:e.ruleInline}},[r("FormItem",{staticStyle:{margin:"26px 0"},attrs:{prop:"old_password",label:"原密码"}},[r("Input",{staticStyle:{width:"100%"},attrs:{type:"password",size:"large",placeholder:"请输入原密码"},model:{value:e.addUser.old_password,callback:function(t){e.$set(e.addUser,"old_password",t)},expression:"addUser.old_password"}})],1),r("FormItem",{staticStyle:{margin:"26px 0"},attrs:{prop:"password",label:"新密码"}},[r("Input",{staticStyle:{width:"100%"},attrs:{type:"password",size:"large",placeholder:"请输入密码"},model:{value:e.addUser.password,callback:function(t){e.$set(e.addUser,"password",t)},expression:"addUser.password"}})],1),r("FormItem",{staticStyle:{margin:"26px 0"},attrs:{prop:"confirmPsw",label:"确认密码"}},[r("Input",{staticStyle:{width:"100%"},attrs:{type:"password",size:"large",placeholder:"请再次输入密码"},model:{value:e.addUser.confirmPsw,callback:function(t){e.$set(e.addUser,"confirmPsw",t)},expression:"addUser.confirmPsw"}})],1),r("FormItem",{staticStyle:{margin:"26px 0"},attrs:{prop:"email",label:"邮箱"}},[r("Input",{staticStyle:{width:"100%"},attrs:{type:"text",size:"large",disabled:"",placeholder:"请输入邮箱"},model:{value:e.addUser.email,callback:function(t){e.$set(e.addUser,"email",t)},expression:"addUser.email"}})],1),r("FormItem",{staticStyle:{margin:"26px 0"},attrs:{prop:"code",label:"验证码"}},[r("Input",{staticStyle:{width:"100%"},attrs:{type:"text",size:"large",placeholder:"请输入邮箱验证码"},model:{value:e.addUser.code,callback:function(t){e.$set(e.addUser,"code",t)},expression:"addUser.code"}},[r("Button",{style:{backgroundColor:e.isSend?"#f7f7f7":"#2d8cf0",color:e.isSend?"#c5c8ce":"#fff"},attrs:{slot:"append",disabled:!!e.isSend,loading:e.loading},on:{click:e.getCode},slot:"append"},[e._v(e._s(e.isSendText))])],1)],1)],1),r("Button",{staticStyle:{float:"left","margin-left":"30px",width:"330px"},attrs:{type:"primary",disabled:!(e.addUser.old_password&&e.addUser.password&&e.addUser.confirmPsw&&e.addUser.code)},on:{click:function(t){return e.handlerSubmit("form_adduser")}}},[e._v("确认")])],1),r("TabPane",{attrs:{label:"用户设置",icon:"logo-tux"}},[r("ul",{staticStyle:{"margin-top":"20px"}},e._l(10,function(t){return r("li",{staticStyle:{display:"flex","align-items":"center",width:"100%",padding:"20px 0","border-bottom":"1px solid rgb(245, 238, 238)"}},[r("span",{staticStyle:{flex:"1","text-align":"left","font-size":"16px"}},[e._v("消息接收设置")]),r("i-Switch",{attrs:{size:"large"}})],1)}),0)]),r("TabPane",{attrs:{label:"系统消息",icon:"md-alarm"}})],1)},s=[],d=(r("a481"),r("f499")),i=r.n(d),l=(r("7f7f"),r("cebc")),n=r("15b8"),o=r.n(n),c=r("5829");function u(e){return Object(c["a"])({url:"/userCenter/queryUser",method:"get",params:e})}function p(e){return Object(c["a"])({url:"/userCenter/editPassword",method:"put",data:e})}function m(e){return Object(c["a"])({url:"/userCenter/edituserInfo",method:"put",data:e})}var f=r("880a"),b={data:function(){var e=this,t=function(t,r,a){""===r?a(new Error("请再次输入密码!")):(r.length<6&&a(new Error("密码长度不少于6位数!")),r!==e.addUser.password&&a(new Error("两次输入密码不一致!")),a())};return{loading:!1,isSend:!1,isSendText:"获取邮箱验证码",addUser:{user:"",old_password:"",password:"",confirmPsw:"",phone:"",role:21,cname:"",email:"",code:""},ruleInline:o()({user:[{required:!0,trigger:"blur"}],old_password:[{required:!0,message:"请输入原密码",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],confirmPsw:[{required:!0,validator:t,trigger:"blur"}],canme:[{required:!0,message:"请输中文名",trigger:"blur"}],code:[{required:!0,message:"请选输入验证码",trigger:"blur"}]})}},activated:function(){this.queryUser()},methods:{queryUser:function(){var e=this;u({userId:this.userInfo.UserId}).then(function(t){e.addUser=Object(l["a"])({},e.addUser,t.data.userInfo)})},getCode:function(){var e=this;this.loading=!0,Object(f["s"])({email:this.addUser.email,type:"edit"}).then(function(t){e.loading=!1,e.isSend=!0;var r=60,a=setInterval(function(){e.isSendText="".concat(r--,"s后重新获取"),r<0&&(clearInterval(a),e.isSendText="获取邮箱验证码",e.isSend=!1)},1e3)},function(t){e.$Message.error({content:"验证码获取失败,请重新获取！",top:50,duration:5}),e.isSendText="重新获取邮箱验证码",e.loading=!1,e.isSend=!1})},handlerSubmit:function(e){var t=this;console.log(this.addUser),this.$refs[e].validate(function(e){e&&p({user:i()(t.addUser),userId:t.userInfo.UserId}).then(function(e){var r=setTimeout(function(){clearTimeout(r),localStorage.clear(),t.$router.replace("/login")},3e3)})})},editUser:function(){var e={phone:this.addUser.phone,cname:this.addUser.cname,userId:this.userInfo.UserId};m(e).then(function(e){})},updateAvatar:function(){alert("正在加紧开发中...`")}}},g=b,h=(r("b1b4"),r("2877")),U=Object(h["a"])(g,a,s,!1,null,"7bea0a82",null);t["default"]=U.exports},b1b4:function(e,t,r){"use strict";var a=r("b905"),s=r.n(a);s.a},b905:function(e,t,r){}}]);