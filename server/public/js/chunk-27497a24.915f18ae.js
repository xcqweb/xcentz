(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-27497a24"],{"66e1":function(e,n,t){},"85a9":function(e,n,t){"use strict";var r=t("66e1"),i=t.n(r);i.a},a762:function(e,n,t){"use strict";t.r(n);var r=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"regiest"},[t("i-form",{ref:"formInline_register",staticStyle:{width:"360px"},attrs:{model:e.formInline,"label-width":80,rules:e.ruleInline}},[t("FormItem",{staticStyle:{height:"40px"},attrs:{prop:"user",label:"用户名"}},[t("Input",{staticStyle:{width:"100%"},attrs:{type:"text",size:"large",placeholder:"用户名"},model:{value:e.formInline.user,callback:function(n){e.$set(e.formInline,"user",n)},expression:"formInline.user"}})],1),t("FormItem",{staticStyle:{margin:"30px 0 30px 0"},attrs:{prop:"password",label:"密码"}},[t("Input",{staticStyle:{width:"100%"},attrs:{type:"password",size:"large",placeholder:"密码"},model:{value:e.formInline.password,callback:function(n){e.$set(e.formInline,"password",n)},expression:"formInline.password"}})],1),t("FormItem",{staticStyle:{margin:"30px 0 30px 0"},attrs:{prop:"phone",label:"电话"}},[t("Input",{staticStyle:{width:"100%"},attrs:{type:"text",size:"large",placeholder:"电话"},model:{value:e.formInline.phone,callback:function(n){e.$set(e.formInline,"phone",n)},expression:"formInline.phone"}})],1),t("FormItem",{staticStyle:{margin:"30px 0 30px 0"},attrs:{prop:"cname",label:"中文名"}},[t("Input",{staticStyle:{width:"100%"},attrs:{type:"text",size:"large",placeholder:"中文名"},model:{value:e.formInline.cname,callback:function(n){e.$set(e.formInline,"cname",n)},expression:"formInline.cname"}})],1),t("FormItem",{staticStyle:{margin:"30px 0 30px 0"},attrs:{prop:"email",label:"邮箱"}},[t("Input",{staticStyle:{width:"100%"},attrs:{type:"text",size:"large",placeholder:"邮箱"},model:{value:e.formInline.email,callback:function(n){e.$set(e.formInline,"email",n)},expression:"formInline.email"}})],1),t("FormItem",{staticStyle:{margin:"30px 0 30px 0"},attrs:{prop:"code",label:"验证码"}},[t("Input",{attrs:{type:"text",size:"large",placeholder:"邮箱验证码"},model:{value:e.formInline.code,callback:function(n){e.$set(e.formInline,"code","string"===typeof n?n.trim():n)},expression:"formInline.code"}},[t("Button",{attrs:{slot:"append",type:e.isSend?"text":"primary",loading:e.codeLoading,disabled:!!e.isSend},on:{click:e.getEmailCodes},slot:"append"},[e._v(e._s(e.isSendText))])],1)],1),t("Button",{staticStyle:{width:"360px","margin-bottom":"20px"},attrs:{type:"primary",size:"large",disabled:!(e.formInline.user&&e.formInline.password&&e.formInline.email&&e.formInline.code&&e.validCode),loading:e.loading},on:{click:function(n){return e.handleSubmit("formInline_register")}}},[e._v("注册")])],1)],1)},i=[],o=(t("7f7f"),t("15b8")),a=t.n(o),l=t("880a"),s=(t("3022"),t("5118"),{data:function(){var e=this,n=function(e,n,t){""===n?t(new Error("请输入邮箱!")):(/^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/.test(n)||t(new Error("邮箱格式不正确!")),Object(l["i"])({username:n}).then(function(e){console.log(e.data.user);var n=e.data.user;n.length>0?t(new Error("邮箱已注册!")):t()}))},t=function(e,n,t){""===n?t(new Error("请输入手机号!")):(/^1(3|4|5|7|8)\d{9}$/.test(n)||t(new Error("手机号格式不正确!")),t())},r=function(e,n,t){""===n?t(new Error("请输入用户名或邮箱!")):Object(l["i"])({username:n}).then(function(e){console.log(e.data.user);var n=e.data.user;n.length>0?t(new Error("用户名或邮箱已注册!")):t()},function(e){t(new Error("校验失败!"))})},i=function(n,t,r){""===t?r(new Error("请输入邮箱验证码!")):Object(l["h"])({code:t}).then(function(n){n.data.valid?(e.validCode=!0,r()):(e.validCode=!1,r(new Error("邮箱验证码不正确!")))},function(n){e.validCode=!1,r(new Error("验证失败!"))})};return{validCode:!1,loading:!1,codeLoading:!1,isSend:!1,isSendText:"获取邮箱验证码",formInline:{user:"",password:"",phone:"",cname:"",email:"",code:""},ruleInline:a()({user:[{required:!0,validator:r,trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{type:"string",min:6,message:"密码长度不少于6位数",trigger:"blur"}],email:[{required:!0,validator:n,trigger:"blur"}],phone:[{validator:t,trigger:"blur"}],code:[{required:!0,validator:i,trigger:"blur"}]})}},created:function(){},methods:{getEmailCodes:function(){var e=this;this.formInline.email?(this.codeLoading=!0,Object(l["s"])({email:this.formInline.email}).then(function(n){if(200==n.status){e.codeLoading=!1,e.isSend=!0;var t=60,r=setInterval(function(){e.isSendText="".concat(t--,"s后重新获取"),t<0&&(clearInterval(r),e.isSendText="获取邮箱验证码",e.isSend=!1)},1e3);console.log(n)}},function(n){e.$Message.error({content:"验证码获取失败,请重新获取！",top:50,duration:5}),e.isSendText="重新获取邮箱验证码",e.isSend=!1,e.codeLoading=!1})):this.$Message.warning({content:"请输入邮箱！",top:50,duration:5})},handleSubmit:function(e){var n=this;this.$refs[e].validate(function(e){if(e){n.loading=!0;var t={username:n.formInline.user,password:n.formInline.password,email:n.formInline.email,phone:n.formInline.phone,cname:n.formInline.cname,code:n.formInline.code};Object(l["A"])(t).then(function(e){if(200===e.status){if("10002"==e.data.errorCode)return void(n.loading=!1);n.loading=!1,n.$router.push("/login")}},function(e){n.loading=!1})}})}}}),d=s,c=(t("85a9"),t("2877")),m=Object(c["a"])(d,r,i,!1,null,"2cef6cc4",null);n["default"]=m.exports}}]);